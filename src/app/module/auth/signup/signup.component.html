<div *ngIf="isLoading" style="text-align: center;">
    <app-loading-spinner></app-loading-spinner>
</div>
<div class="alert alert-success textAlign" *ngIf="authMessage">
    <div>
        <p class="textAlign">{{ authMessage }}</p>
    </div>
</div>
<form [formGroup]="registrationForm" (ngSubmit)="onSubmit($event)" class="form-horizontal" *ngIf="!isLoading">
    <div class="alert alert-danger textAlign" *ngIf="failMessage">
        <div>
            <p class="textAlign">{{ failMessage }}</p>
        </div>
    </div>
    <div class="alert alert-success textAlign" *ngIf="successMessage">
        <div>
            <p class="textAlign">{{ successMessage }}</p>
        </div>
    </div>
    <div class="card">
        <div class="card-header">
            <h4 class="card-title">Registration Form</h4>
        </div>
        <div class="card-body">
            <div class="row form-group" [ngClass]="{'has-error':formErrors.name}">
                <label for="name" class="col-sm-4 control-label fontWeight">Name</label>
                <div class="col-sm-8">
                    <input type="text" formControlName="name" id="name" class="form-control"
                        (blur)="logValidationErrors()">
                    <span class="help-block errorMessageStyle" *ngIf="formErrors.name">
                        {{ formErrors.name }}
                    </span>
                </div>
            </div>
            <hr>
            <div class="row form-group" [ngClass]="{'has-error': formErrors.password}">
                <label for="password" class="col-sm-4 control-label fontWeight">Password</label>
                <div class="col-sm-8">
                    <div class="input-group">
                        <input [type]="passwordFieldTextType ? 'text' : 'password'" formControlName="password"
                            id="password" class="form-control" (blur)="logValidationErrors()" />
                        <div class="input-group-append">
                            <span class="input-group-text">
                                <i class="fa"
                                    [ngClass]="{'fa-eye-slash': !passwordFieldTextType,'fa-eye': passwordFieldTextType}"
                                    (click)="togglePasswordFieldTextType()"></i>
                            </span>
                        </div>
                    </div>
                    <span class="help-block mr-auto errorMessageStyle" *ngIf="formErrors.password">
                        {{ formErrors.password }}
                    </span>
                </div>
            </div>
            <div class="row form-group" [ngClass]="{'has-error': formErrors.confirmPassword}">
                <label for="confirmPassword" class="col-sm-4 control-label fontWeight">Confirm
                    Password</label>
                <div class="col-sm-8">
                    <div class="input-group">
                        <input [type]="confirmPasswordFieldTextType ? 'text' : 'password'"
                            formControlName="confirmPassword" id="confirmPassword" class="form-control"
                            (blur)="logValidationErrors()" />
                        <div class="input-group-append">
                            <span class="input-group-text">
                                <i class="fa"
                                    [ngClass]="{'fa-eye-slash': !confirmPasswordFieldTextType,'fa-eye': confirmPasswordFieldTextType}"
                                    (click)="toggleConfirmPasswordFieldTextType()"></i>
                            </span>
                        </div>
                    </div>
                    <span class="help-block errorMessageStyle" *ngIf="formErrors.confirmPassword">
                        {{ formErrors.confirmPassword }}
                    </span>
                </div>
            </div>
            <hr>
            <div class="row form-group" [ngClass]="{'has-error': formErrors.email}">
                <label for="email" class="col-sm-4 control-label fontWeight">Email</label>
                <div class="col-sm-8">
                    <input type="text" formControlName="email" id="email" class="form-control"
                        (blur)="logValidationErrors()">
                    <span class="help-block errorMessageStyle" *ngIf="formErrors.email">
                        {{ formErrors.email }}
                    </span>
                </div>
            </div>
            <div class="row form-group" [ngClass]="{'has-error': formErrors.phone}">
                <label for="phone" class="col-sm-4 control-label fontWeight">Phone</label>
                <div class="col-sm-8">
                    <input type="text" formControlName="phone" appNumberInput autocomplete="off" id="phone"
                        class="form-control" (blur)="logValidationErrors()">
                    <span class="help-block errorMessageStyle" *ngIf="formErrors.phone">
                        {{ formErrors.phone }}
                    </span>
                </div>
            </div>
            <hr>
            <div formGroupName="address">
                <label class="control-label fontWeight">Address:</label>
                <div class="row form-group" [ngClass]="{'has-error': formErrors.street}">
                    <label for="street" class="col-sm-4 control-label addressTextAlign">Street</label>
                    <div class="col-sm-8">
                        <input type="text" formControlName="street" id="street" class="form-control"
                            (blur)="logValidationErrors()">
                        <span class="help-block errorMessageStyle" *ngIf="formErrors.street">
                            {{ formErrors.street }}
                        </span>
                    </div>
                </div>
                <div class="row form-group" [ngClass]="{'has-error': formErrors.city}">
                    <label for="city" class="col-sm-4 control-label addressTextAlign">City</label>
                    <div class="col-sm-8">
                        <input type="text" formControlName="city" id="city" class="form-control"
                            (blur)="logValidationErrors()">
                        <span class="help-block errorMessageStyle" *ngIf="formErrors.city">
                            {{ formErrors.city }}
                        </span>
                    </div>
                </div>
                <div class="row form-group" [ngClass]="{'has-error': formErrors.state}">
                    <label for="state" class="col-sm-4 control-label addressTextAlign">State</label>
                    <div class="col-sm-8">
                        <input type="text" formControlName="state" id="state" class="form-control"
                            (blur)="logValidationErrors()">
                        <span class="help-block errorMessageStyle" *ngIf="formErrors.state">
                            {{ formErrors.state }}
                        </span>
                    </div>
                </div>
                <div class="row form-group" [ngClass]="{'has-error': formErrors.country}">
                    <label for="country" class="col-sm-4 control-label addressTextAlign">Country</label>
                    <div class="col-sm-8">
                        <input type="text" formControlName="country" id="country" class="form-control"
                            (blur)="logValidationErrors()">
                        <span class="help-block errorMessageStyle" *ngIf="formErrors.country">
                            {{ formErrors.country }}
                        </span>
                    </div>
                </div>
                <div class="row form-group" [ngClass]="{'has-error': formErrors.postalCode}">
                    <label for="postalCode" class="col-sm-4 control-label addressTextAlign">Postal
                        Code</label>
                    <div class="col-sm-8">
                        <input type="text" formControlName="postalCode" id="postalCode" class="form-control"
                            (blur)="logValidationErrors()">
                        <span class="help-block errorMessageStyle" *ngIf="formErrors.postalCode">
                            {{ formErrors.postalCode }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <div class="button-group">
                <button [disabled]="registrationForm.invalid || submitButtonStatus" type="submit"
                    class="btn btn-primary">Register</button>
                <p >Already have an account? <a class="loginBtn" routerLink="/login">Login</a></p>
            </div>
        </div>
    </div>
</form>